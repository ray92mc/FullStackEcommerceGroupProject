{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags%}
{% block metadescription %}
{% if category %}
{{ category.description|truncatewords:155 }}
{% else %}
Welcome to the Online Book Store where you can buy awesome books.
{% endif %}
{% endblock %}
{% block title %}
{% if category %}
{{ category.name }} - Bookspace.
{% else %}
Best Value - Bookspace.
{% endif %}
{% endblock %}
{% block content %}
<style>


			#former:hover {

				

			}
			.blue{
				transition: 100.1ms ease-in;
			}
			.bluePassword{
				transition: 100.1ms ease-in;
			}
			.blueRefund{
				transition: 100.1ms ease-in;
			}
			.blue:hover{

				background-color: #282d32;
				color: white;
				transform: translateY(-5px);
			}

			.bluePassword:hover{
				background-color: #282d32;
				color: white;
				transform: translateY(-5px);
			}
			.blueRefund:hover{
				background-color: #282d32;
				color: white;
				transform: translateY(-5px);
			}
	
	.menu {
		height: 30vh;
		width: 200px;
		z-index: 1;
		left: 0;
		margin-top: 55px;


		padding-top: 20px;
		background-color: #282d32;
		position: absolute;
		margin-bottom: -40px;



	}

	.card-profile {
		border-radius: 20px;
		;

	}

	.menu a {
		text-decoration: none;
		list-style-type: none;
		display: block;
		text-transform: uppercase;

	}

	.menu a:hover {
		background-color: grey;
	}
</style>

<div class="container-fluid">
	<div class="menu shadow-lg p-3 mb-5 ">
		<a style=" font-weight:20px; " href="{% url 'dashboard_view'%}" class="text-justify text-light btn rounded-0">
			<i class="fas fa-chevron-left"></i> dashboard
		</a>
		<a style=" font-weight:20px" class="text-justify text-light btn disabled rounded-0">Profile </a>
		<a style=" font-weight:20px" href="{% url 'shop:wishList_books'%}"
			class="text-justify text-light btn rounded-0 ">Wishlist</a>
		<a style=" font-weight:20px" href="{% url 'order:order_history'%}"
			class="text-justify text-light btn rounded-0 ">Orders</a>
		<a href="{% url 'shop:reviewList'%}" style="  font-weight:20px" class="text-justify  text-light btn rounded-0"
			aria-disabled="true">Reviews</a>
	</div>
	<div>
		<div class="row ">
			<div class="col-2">

			</div>
			<div class="col-8">



				<br>
				<h1 class="text-justify my_title">Profile</h1>
				<br>

			</div>
		</div>

	</div>


	<div class="row">
		<div class="col-2">

		</div>

		<div class="col-3 ">
			<div class=" text-center card-profile shadow p-3  mb-5 bg-white ">
				<img class="p-3 "
					style="position: inherit; height: auto; border-radius: 50%; width: 250px; height: 250px; object-fit: cover;"
					src="{{p.profile_image.url}}" alt="profile-iamge">
				<div class="card-body">
					<h2 class="card-title">
						{{p.user}}
					</h2>
					<p class="card-title text-secondary  ">
						{{p.email_address}}
					</p>
					<p class="mt-3 border-bottom">

					</p>

					<span>Wihslists {{wishlist|length}}</span>
					<div class="progress">

						<div class="progress-bar bg-warning progress-bar-striped progress-bar-animated"
							role="progressbar" style="width:{{wishlist|length}}%; " aria-valuenow="{{wishlist|length}}"
							aria-valuemin="0" aria-valuemax="{{totalW|length}}"></div>
					</div>
					<span>Reviews {{reviews|length}}</span>
					<div class="progress">

						<div class="progress-bar bg-primary progress-bar-striped progress-bar-animated"
							role="progressbar" style="width:{{reviews|length}}%; " aria-valuenow="{{reviews|length}}"
							aria-valuemin="0" aria-valuemax="{{totalR|length}}"></div>
					</div>
					<span>Orders {{orders|length}}</span>
					<div class="progress">

						<div class="progress-bar bg-success progress-bar-striped progress-bar-animated"
							role="progressbar" style="width:{{orders|length}}% " aria-valuenow="{{orders|length}}"
							aria-valuemin="0" aria-valuemax="{{totalO|length}}"></div>
					</div>
					<span>Blogs {{blog|length}}</span>
					<div class="progress">

						<div class="progress-bar bg-dark progress-bar-striped progress-bar-animated" role="progressbar"
							style="width:{{blog|length}}%; " aria-valuenow="{{blog|length}}" aria-valuemin="0"
							aria-valuemax="{{blog|length}}"></div>
					</div>
				</div>
			</div>
		</div>
		<style>

		</style>

		<div class="col-7">
			<div class=" text-justify card-profile shadow p-3  mb-5 bg-white " style="width: auto;">
				<form id="formG" class="form-group" style="font-weight: lighter; " method="POST" action=""
					enctype="multipart/form-data">
					{%csrf_token%}
					<p style="font-weight: lighter;">{{form | crispy}}</p>
					<input style="" class="btn btn-dark" type="submit">
				</form>
			</div>
		</div>
	</div>

	<div class="row">

		<div class="col-">

		</div>


		<div class="col-2">

		</div>

		<div class="col-4">
			<div class="bluePassword text-justify card-profile shadow p-3  mb-5  " style="width: auto; cursor: pointer;">
				<a style="cursor: pointer;" id="formPassword"
					class="text-center  bg-primary btn-primary rounded">
					<h5 id="former" class="my-2">Password Reset</h5>
				</a>
				<form id="PasswordForm" style="display:none;" class="form-group" style="font-weight: lighter; "
					method="POST" action="{% url 'change_password' %}" enctype="multipart/form-data">
					{%csrf_token%}
					<p style="font-weight: lighter;">{{pForm | crispy}}</p>
					<input class="text-center" style="background-color:rgb(9, 108, 255)" class="btn " type="submit">
				</form>
			</div>
		</div>
		<div class="col-4">
			<div class=" text-justify card-profile shadow p-3  mb-5  blueRefund" style="width: auto; cursor: pointer;">
				<a style="" id="formRefund" class="text-center bg-primary btn-primary  rounded">
					<h5 id="former" class="my-2"> Request Refund</h5>
				</a>



				<form id="RefundForm" style="display:none;" class="form-group" style="font-weight: lighter; "
					method="POST" action="{% url 'order:request-refund' %}" enctype="multipart/form-data">
					{%csrf_token%}
					<p style="font-weight: lighter;">{{rForm | crispy}}</p>
					<input class="text-center" style="background-color:rgb(9, 108, 255)" class="btn " type="submit">
				</form>
			</div>
		</div>
		<div class="col-4">


		</div>
		
		
		
		<div class="col-4">
			<div id="รง" class=" text-justify card-profile shadow p-3  mb-5  blue" style="width: auto; cursor: pointer;">
				<a style="" id="formBlog" class="text-center bg-primary btn-primary  rounded">
					<h5 id="former" class="my-2">Create Blog</h5>
				</a>



				<form id="blogForm" style="display:none;" class="form-group" style="font-weight: lighter; "
					method="POST" action="{% url 'blog:add_blog'%}" enctype="multipart/form-data">
					{%csrf_token%}
					<p style="font-weight: lighter;">{{blogform | crispy}}</p>
					<input class="text-center" style="background-color:rgb(9, 108, 255)" class="btn " type="submit">
				</form>
			</div>
		</div>
	</div>
	<script>
		blogColour = document.querySelector(".blue")
		blueColourPassword = document.querySelector(".bluePassword")
		blueColourRefund = document.querySelector(".blueRefund")		
		blogForm = document.getElementById("formBlog");
		formBlog = document.getElementById("blogForm")
		formRefund = document.getElementById("RefundForm")
		RefundForm = document.getElementById("formRefund");
		PasswordForm = document.getElementById("formPassword");
		formPassword = document.getElementById("PasswordForm")
		var flagger;
		var flaggerPassowrd;
		var flaggerRefund;
		blogForm.addEventListener("click", toggleer);
		PasswordForm.addEventListener("click", toggleerPassword);
		RefundForm .addEventListener("click", toggleerRefund);

		function toggleer() {
			if (flagger) {
				formBlog.style.display = "none";
				blogColour.classList.add("blue")
				flagger = false
			}

			else {
				formBlog.style.display = "block";
				blogColour.classList.remove("blue")
				flagger = true
			}


		}
		function toggleerPassword() {
			if (flaggerPassowrd) {
				formPassword.style.display = "none";
				blueColourPassword.classList.add("bluePassword")
				flaggerPassowrd = false
			}

			else {
				formPassword.style.display = "block";
				blueColourPassword.classList.remove("bluePassword")
				flaggerPassowrd = true

			}

		}
			function toggleerRefund() {
			if (flaggerRefund) {
				formRefund.style.display = "none";
				blueColourRefund.classList.add("blueRefund")
				flaggerRefund = false
			}

			else {
				formRefund.style.display = "block";
				blueColourRefund.classList.remove("blueRefund")
				flaggerRefund = true
			}


		
		}


	</script>




</div>


<!--
	<h1 style="font-weight: lighter;" class="mb-5">Profile - {{p.user}}</h1>
	<div class="row">
		{% if p%}

		<div class="col-4">
			<div class="text-justify">
				<img class="profile-pic "
					style=" height: auto; border-radius: 50%; width: 350px; height: 350px; object-fit: cover;"
					src="{{p.profile_image.url}}" alt="profile-iamge">

				
				<h1 style="font-size: 40px; font-family:Helvetica;" class=" pt-5 text-justify">{{p.first_name}} {{p.last_name}}</h1>
				<h1 style="font-size: 30px;" class="text-justify text-secondary">{{p.user}}</h1>
				<p>{{p.email_address}}</p>
				<p>{{p.colour}}</p>
				<p>Orders Placed {{orders|length}}</p>
				<p>Items in WishList {{wishlist|length}}</p>
				<p>Reviews By {{request.user}}: {{reviews|length}}</p>
				
			</div>
			{%endif%}
		</div>

			<div class="col-8">
				<form style="font-weight: lighter;" method="POST" action="" enctype="multipart/form-data">
					{%csrf_token%}


					<p style="font-weight: lighter;">{{form | crispy}}</p>


					<input style ="background-color:{{p.colour}}" class="btn " type="submit">
				</form>

			</div>






		
	</div>
	<div class="row">



		
	</div>-->
</div>



{% endblock content %}